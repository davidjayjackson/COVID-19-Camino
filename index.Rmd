---
title: "COVID-19 on the Camino: Spain and Portugal"
author: "David J Jackson"
date: "May 11,  2020 4:25 PM EDT"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(RSQLite)
```
```{r,echo=FALSE}
rm(list=ls())
db <- dbConnect(SQLite(), dbname="../COVIDDB//CORVID.sqlite3")
ECDC <- dbGetQuery(db,"select Reported,Countries,Cases,Deaths from ECDC")
ECDC$Reported <- as.Date(ECDC$Reported)
ECDC$DeathRate <- ECDC$Deaths/ECDC$Cases
CAMINO <- ECDC %>% filter(Countries=="Spain" |Countries=="Portugal")
## JHU Dat
JHUDATA <- dbGetQuery(db,"select date,country,confirmed,deaths,recovered from JHUDATA")
JHUDATA$date <- as.Date(JHUDATA$date)
JHUDATA$DeathRate <- JHUDATA$deaths/JHUDATA$confirmed
BURGOS<- JHUDATA %>% filter(country=="Spain" |country=="Portugal")


```

### Spain's Fight with COVID-19 (Daily Totals)

```{r,echo=FALSE}
CAMINO %>% ggplot() + geom_col(aes(x=Reported,y=Cases)) +
  labs(title="Total Cases: Spain's fight with COVID-19",x="Date Reported",y="Total Cases Reported")

CAMINO %>% ggplot() + geom_col(aes(x=Reported,y=Deaths)) +
  labs(title="Total Deaths: Spain's fight with COVID-19",x="Date Reported",y="Total Deaths Reported")

CAMINO %>% ggplot() + geom_col(aes(x=Reported,y=DeathRate)) +
  labs(title="Rate of Deaths: Spain's fight with COVID-19",x="Date Reported",y="Death RAte (%)")
```

### Portugal's Fight with COVID-19 (Daily Totals)

```{r,echo=FALSE}
CAMINO %>% ggplot() + geom_col(aes(x=Reported,y=Cases)) +
  labs(title="Total Cases: Portugal's fight with COVID-19",x="Date Reported",y="Total Cases Reported")

CAMINO %>% ggplot() + geom_col(aes(x=Reported,y=Deaths)) +
  labs(title="Total Deaths: Portugal's fight with COVID-19",x="Date Reported",y="Total Deaths Reported")

CAMINO%>% ggplot() + geom_col(aes(x=Reported,y=DeathRate)) +
  labs(title="Rate of Deaths: Portugal's fight with COVID-19",x="Date Reported",y="Death RAte (%)")
```


### Spain's Fight with COVID-19 Accumulated Totals (From Jan. 1,2020)

```{r,echo=FALSE}
PORTA <- BURGOS %>% filter(country =="Spain")
PORTA %>% ggplot() + geom_col(aes(x=date,y=confirmed)) +
  labs(title="Total Cases: Spain's fight with COVID-19",x="Date Reported",y="Total Cases To Date")

PORTA %>% ggplot() + geom_col(aes(x=date,y=deaths)) +
  labs(title="Total Deaths: Spain's fight with COVID-19",x="Date Reported",y="Total  Deaths To Date")

PORTA %>% ggplot() + geom_col(aes(x=date,y=DeathRate)) +
  labs(title="Rate of Deaths: Spain's fight with COVID-19",x="Date Reported",y="Death RAte (%)")
```

### Portugal's Fight with COVID-19 Accumulated Totals (From Jan. 1,2020)

```{r,echo=FALSE}
BURGOS <- BURGOS %>% filter(country=="Portugal") 
BURGOS %>% ggplot() + geom_col(aes(x=date,y=confirmed)) +
  labs(title="Total Cases: Portugal's fight with COVID-19",x="Date Reported",y="Total Cases Reported to Date")

BURGOS %>% ggplot() + geom_col(aes(x=date,y=deaths)) +
  labs(title="Total Deaths: Portugal's fight with COVID-19",x="Date Reported",y="Total Deaths Reported")

BURGOS %>% ggplot() + geom_col(aes(x=date,y=DeathRate)) +
  labs(title="Rate of Deaths: Portugal's fight with COVID-19",x="Date Reported",y="Death RAte (%)")
```
```{r}
dbDisconnect(db)
```

